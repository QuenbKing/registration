# registration

## Решаемая задача

Форма регистрации с отправкой имейла после одобрения из внешней системы.

Дана форма регистрации в нашем приложении, в которой необходимо заполнить:

- логин,

- пароль,

- адрес электронной почты,

- ФИО.

После отправки формы, мы регистрируем данные из нее в нашей БД, а также отправляем ее для одобрения во внешней системе. Пусть обмен с этой внешней системой будет через некое messaging решение. После одобрения или отклонения заявки, наше приложение должно отправить сообщение на электронную почту нашему пользователю с результатом проверки. 

Стэк: JavaSE 8+, Spring boot 2, dbms - h2. Для тестов предпочтение Junit/Mockito/Assertj, т.к. на проекте будут именно они. Остальное по вкусу.

В качестве абстракции над шиной предлагаем взять такой набросок:

https://pastebin.com/qWjRPuyp

Возвращать из примеров в наброске можно заглушки, дабы сэкономить время на реализацию тестового задания. Неплохо при этом помнить, что в реальной эксплуатации любая часть нашей системы может отказать. Будем очень рады обоснованиям принятых архитектурных решений. Комментарии в коде к ним крайне приветствуются.

## Используемые инструменты

- Kafka
- H2
- Gradle

## Описание проекта

### registration-service

1.Валидирует данные из регистрационной формы, сохраняет данные из формы в БД, отправляет данные во внешнюю систему для однобрения и отправляет сообщение о результате регистрации пользователю на email (используется заглушка в виде лога).
2.Реализован паттерн Outbox для гарантии того, что сообщения не будут потеряны.
3.Реализована валидация данных из регистрационной формы.
4.Слушает сообщения от verification-service для того чтобы отправить результат регистрации на email (используется заглушка)

### verification-service

1.Слушает сообщения от registration-service и определяет отклонить или одобрить запрос на регистрацию (определяется случайным образом)
2.Отправляет результат одобрения в Kafka

## Запуск приложения

```shell
./gradlew clean 
./gradlew build
docker-compose up -d
```
Запустите RegistrationServiceApplication и VerificationServiceApplication через Recent Configuration:

![image](https://github.com/user-attachments/assets/2b3428d1-87bb-4aaa-b9ad-74d743aeb141)

или командную строку:

```shell
./gradlew runAll --parallel
```
